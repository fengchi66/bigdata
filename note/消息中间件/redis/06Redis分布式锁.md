## 面试题

- Redis除了拿来做缓存，你还见过基于Redis的什么用法？
- Redis 做分布式锁的时候有需要注意的问题？
- 如果是 Redis 是单点部署的，会带来什么问题？怎么解决单点问题呢？
- 集群模式下，比如主从模式，有没有什么问题呢？
- 你知道 Redis 是怎么解决集群模式也不靠谱的问题的吗？
- 那你简单的介绍一下 Redlock 吧？你简历上写redisson，你谈谈
- 你觉得 Redlock 有什么问题呢？
- Redis分布式锁如何续期？看门狗(watch dog)知道吗？

  ## 分布式锁

### 锁的种类

- 单机版：同一个JVM虚拟机内，synchronized或者Lock接口

- 分布式：不同个JVM虚拟机内，单机的线程锁机制不再起作用，资源类在不同的服务器之间共享了。

### 一个靠谱分布式锁需要具备的条件和刚需

- **独占性**：OnlyOne，任何时刻只能有且仅有一个线程持有
- **高可用**：若redis集群环境下，不能因为某一个节点挂了而出现获取锁和释放锁失败的情况
- **防死锁**：杜绝死锁，必须有超时控制机制或者撤销操作，有个兜底终止跳出方案
- **不乱抢**：防止张冠李戴，不能私下unlock别人的锁，只能自己加锁自己释放
- **重入性**：同一个节点的同一个线程如果获得锁之后，它也可以再次获取这个锁。